'use strict';

var app = angular.module('Meaniscule', ['ui.router', 'firebase']);

app.config(function ($urlRouterProvider, $locationProvider) {
   // This turns off hashbang urls (/#about) and changes it to something normal (/about)
   $locationProvider.html5Mode(true);
   // If we go to a URL that ui-router doesn't have registered, go to the "/" url.
   $urlRouterProvider.otherwise('/');
});
'use strict';

app.controller('HomeController', function ($scope, $http) {
  var socket = io();
  function initiate() {
    console.log('initiated!');
    paper.install(window);
    paper.setup('myCanvas');
  };
  initiate();

  // Drawing on the night sky
  var tool = new Tool();

  var stroke;
  var path_to_send = {};

  tool.onMouseDown = function (event) {
    stroke = new Path();
    stroke.fillColor = {
      hue: Math.random() * 360,
      saturation: 1,
      brightness: 1
    };
    stroke.add(event.point);

    //defining what to send via sockets
    path_to_send = {
      color: stroke.fillColor,
      start: event.point,
      stroke: []
    };
  };

  tool.onMouseDrag = function (event) {
    var step = event.delta.divide(2);
    step.angle += 90;

    var top = event.middlePoint.add(step);
    var bottom = event.middlePoint.subtract(step);

    stroke.add(top);
    stroke.insert(0, bottom);
    stroke.smooth();

    path_to_send.stroke.push({
      top: top,
      bottom: bottom
    });
    //emitting my drawing
    socket.emit('meDrawing', JSON.stringify(path_to_send));
  };

  tool.onMouseUp = function (event) {
    stroke.add(event.point);
    stroke.closed = true;
    stroke.smooth();
  };

  // When someone else starts drawing
  socket.on('friendsDrawing', function (data) {
    console.log('friendsDrawing', JSON.parse(data));
    var stroke2 = new Path();
    var friendsDrawing = JSON.parse(data);
    var eachStroke = friendsDrawing.stroke;
    var start_point = new Point(friendsDrawing.start[1], friendsDrawing.start[2]);
    var color = friendsDrawing.color;
    stroke2.fillColor = color;
    stroke2.add(start_point);
    for (var i = 0; i < eachStroke.length; i++) {
      stroke2.add(new Point(eachStroke[i].top[1], eachStroke[i].top[2]));
      stroke2.insert(0, new Point(eachStroke[i].bottom[1], eachStroke[i].bottom[2]));
    }
    stroke2.smooth();
    console.log('here is stroke2', stroke2);
    view.draw();
    view.update();
  });

  //Putting stars on the night sky

  var center = view.center;
  var points = 5;
  var radius1 = 5;
  var radius2 = 10;
  var star = new Path.Star(center, points, radius1, radius2);

  star.style = {
    fillColor: 'yellow'
  };

  var starArr = [];
  for (var i = 0; i < 100; i++) {
    var starCopy = star.clone();
    var randomPosition = Point.random();
    randomPosition.x = randomPosition.x * view.size._width;
    randomPosition.y = randomPosition.y * view.size._height;
    starCopy.position = randomPosition;
    starCopy.rotate(Math.random() * 20);
    starCopy.scale(0.25 + Math.random() * 0.75);
    starCopy.onMouseMove = function (event) {
      this.opacity = Math.random();
    };
    starArr.push(starCopy);
  }

  star.remove();

  view.onFrame = function (event) {
    for (var i = 0; i < starArr.length; i++) {
      starArr[i].fillColor.hue += (1 - Math.round(Math.random()) * 2) * (Math.random() * 5);
      starArr[i].rotate(Math.random());
      starArr[i].position.x += starArr[i].bounds.width / 200;
      if (starArr[i].bounds.left > view.size.width) {
        starArr[i].position.x = -starArr[i].bounds.width;
      }
    }
  };

  //project refers the work done on the canvas
  socket.emit('sendtheNight', project);
});
"use strict";

app.factory("DrawingFactory", function ($http) {
  return {
    loadCanvas: function loadCanvas() {
      return $http.get("/").then(function (response) {
        return response.data;
      });
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/app/home/home.html',
        controller: 'HomeController'
    });
});
"use strict";

app.directive("navbar", function () {
	return {
		restrict: "E",
		templateUrl: "/app/navbar/navbar.html"
	};
});
'use strict';

app.controller('HomeController', function ($scope, $http) {
  var socket = io();
  function initiate() {
    console.log('initiated!');
    paper.install(window);
    paper.setup('myCanvas');
  };
  initiate();

  // Drawing on the night sky
  var tool = new Tool();

  var stroke;
  var path_to_send = {};

  tool.onMouseDown = function (event) {
    stroke = new Path();
    stroke.fillColor = {
      hue: Math.random() * 360,
      saturation: 1,
      brightness: 1
    };
    stroke.add(event.point);

    //defining what to send via sockets
    path_to_send = {
      color: stroke.fillColor,
      start: event.point,
      stroke: []
    };
  };

  tool.onMouseDrag = function (event) {
    var step = event.delta.divide(2);
    step.angle += 90;

    var top = event.middlePoint.add(step);
    var bottom = event.middlePoint.subtract(step);

    stroke.add(top);
    stroke.insert(0, bottom);
    stroke.smooth();

    path_to_send.stroke.push({
      top: top,
      bottom: bottom
    });
    //emitting my drawing
    socket.emit('meDrawing', JSON.stringify(path_to_send));
  };

  tool.onMouseUp = function (event) {
    stroke.add(event.point);
    stroke.closed = true;
    stroke.smooth();
  };

  // When someone else starts drawing
  socket.on('friendsDrawing', function (data) {
    console.log('friendsDrawing', JSON.parse(data));
    var stroke2 = new Path();
    var friendsDrawing = JSON.parse(data);
    var eachStroke = friendsDrawing.stroke;
    var start_point = new Point(friendsDrawing.start[1], friendsDrawing.start[2]);
    var color = friendsDrawing.color;
    stroke2.fillColor = color;
    stroke2.add(start_point);
    for (var i = 0; i < eachStroke.length; i++) {
      stroke2.add(new Point(eachStroke[i].top[1], eachStroke[i].top[2]));
      stroke2.insert(0, new Point(eachStroke[i].bottom[1], eachStroke[i].bottom[2]));
    }
    stroke2.smooth();
    console.log('here is stroke2', stroke2);
    view.draw();
    view.update();
  });

  //Putting stars on the night sky

  var center = view.center;
  var points = 5;
  var radius1 = 5;
  var radius2 = 10;
  var star = new Path.Star(center, points, radius1, radius2);

  star.style = {
    fillColor: 'yellow'
  };

  var starArr = [];
  for (var i = 0; i < 100; i++) {
    var starCopy = star.clone();
    var randomPosition = Point.random();
    randomPosition.x = randomPosition.x * view.size._width;
    randomPosition.y = randomPosition.y * view.size._height;
    starCopy.position = randomPosition;
    starCopy.rotate(Math.random() * 20);
    starCopy.scale(0.25 + Math.random() * 0.75);
    starCopy.onMouseMove = function (event) {
      this.opacity = Math.random();
    };
    starArr.push(starCopy);
  }

  star.remove();

  view.onFrame = function (event) {
    for (var i = 0; i < starArr.length; i++) {
      starArr[i].fillColor.hue += (1 - Math.round(Math.random()) * 2) * (Math.random() * 5);
      starArr[i].rotate(Math.random());
      starArr[i].position.x += starArr[i].bounds.width / 200;
      if (starArr[i].bounds.left > view.size.width) {
        starArr[i].position.x = -starArr[i].bounds.width;
      }
    }
  };

  // var blackSquare = Path.Rectangle(new Point(0,0), new Size(view.size._width,view.size._height));
  // blackSquare.fillColor = 'yellow';
  // blackSquare.opacity = 0.85;
  // blackSquare = new Layer();

  // //creating new tool to clear the night sky or "erase" the blackCover on a path
  // var tool2 = new Tool();

  // var stroke2;
  // var path_to_send2 = {};

  // // project.layers[1].insertChild(0, stroke2);
  // tool2.onMouseDown = function (event) {
  //   stroke2 = new Path();
  //   stroke2.fillColor = 'green'; //the color does not affect the functionality
  //   stroke2.opacity = 1;
  //   stroke2.strokeWidth = 20;
  //   // stroke2.blendMode = 'destination-out'; //conflicts with stroke2.fillColor
  //   stroke2.add(event.point);
  // // //defining what to send via sockets
  //   path_to_send2 = {
  //     color: stroke2.fillColor,
  //     start: event.point,
  //     stroke2: []
  //   }
  // }

  // tool2.onMouseDrag = function (event) {
  //   var step = event.delta.divide(2)
  //   step.angle += 90;

  //   var top = event.middlePoint.add(step);
  //   var bottom = event.middlePoint.subtract(step);

  //   stroke2.add(top);
  //   stroke2.insert(0, bottom);
  //   stroke2.smooth();

  //   path_to_send2.stroke2.push({
  //     top: top,
  //     bottom: bottom
  //   });

  //   //emitting my drawing
  //   socket.emit('clearingTheSky', JSON.stringify(path_to_send2));
  // }

  // tool2.onMouseUp = function (event) {
  //   stroke2.add(event.point);
  //   stroke2.closed = true;
  //   stroke2.smooth();
  // }

  // socket.on('friendsSendingtheNight', function(data) {
  //     console.log('friendsSendingtheNight', JSON.parse(data));
  // });

  //project refers the work done on the canvas
  socket.emit('sendtheNight', project);
  // socket.on('friendSending', function(data) {
  //   console.log('friendSending', JSON.parse(data));
  // })
});
'use strict';

var express = require('express');
var app = express();
var server = require('http').Server(app);
var io = require('socket.io')(server);
var path = require('path');
var logger = require('morgan');
var chalk = require('chalk');
var bodyParser = require('body-parser');

var publicPath = path.join(__dirname, '../../public');
var indexHtmlPath = path.join(__dirname, '../index.html');
var nodePath = path.join(__dirname, '../../node_modules');

/* 
Meaniscule doesn't use Bower by default. To use Bower,
uncomment the following line and the related `app.use` line below.
*/
// var bowerPath = path.join(__dirname, '../../bower_components');

var startApp = function startApp() {
  app.use(logger('dev'));
  app.use(bodyParser.json());
  app.use(bodyParser.urlencoded({ extended: true }));

  app.use(express['static'](publicPath));
  app.use(express['static'](nodePath));
  // app.use(express.static(bowerPath));

  /* 
  Provides a 404 for times when 
  Credit to `fsg` module for this one!
  */
  app.use(function (req, res, next) {

    if (path.extname(req.path).length > 0) {
      res.status(404).end();
    } else {
      next(null);
    }
  });

  // Routes
  //// APIs for AJAX
  app.use('/api', require('../routes/'));

  //// Index/Home
  app.use('/', function (req, res, next) {
    res.sendFile(path.join(__dirname, './views/index.html'));
  });

  // Errors
  //// Not found
  app.use(function (req, res, next) {
    var err = new Error('Not Found');
    err.status = 404;
    next(err);
  });

  //// Server issues
  app.use(function (err, req, res, next) {
    res.sendStatus(err.status || 500);
  });
};

io.on('connection', function (socket) {
  console.log('connected', socket.id);
  //listening to the night sky with stars
  socket.on('sendtheNight', function (data) {
    console.log('this is the starry night', data);
  });

  socket.on('meDrawing', function (data) {
    console.log('meDrawing', data);
    socket.broadcast.emit('friendsDrawing', data);
  });

  //listening to me clearing the sky
  // socket.on('clearingTheSky', function(data) {
  //     console.log('clearingTheSky', data);
  //listening to other people clearing the sky
  //     socket.broadcast.emit('friendsClearing', data);
  // });  
});

var startServer = function startServer() {
  var port = 4545;
  server.listen(port, function () {
    console.log('The server is listening on port', chalk.green.bold(port), 'and loves you very much.');
  });
};

module.exports = {
  startApp: startApp,
  startServer: startServer,
  server: server
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLmZhY3RvcnkuanMiLCJob21lL2hvbWUuc3RhdGUuanMiLCJuYXZiYXIvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsIm9wYWNpdHkvb3BhY2l0eV9ob21lLmpzIiwib3BhY2l0eS9vcGFjaXR5X2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQzs7QUFFbEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGtCQUFrQixFQUFFLGlCQUFpQixFQUFFOztBQUV6RCxvQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLHFCQUFrQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQyxDQUFDLENBQUM7OztBQ1BILEdBQUcsQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsVUFBUyxNQUFNLEVBQUUsS0FBSyxFQUFFO0FBQ3ZELE1BQUksTUFBTSxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQ2xCLFdBQVMsUUFBUSxHQUFJO0FBQ25CLFdBQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDMUIsU0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN0QixTQUFLLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQ3pCLENBQUM7QUFDRixVQUFRLEVBQUUsQ0FBQzs7O0FBR1gsTUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7QUFFdEIsTUFBSSxNQUFNLENBQUM7QUFDWCxNQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7O0FBRXRCLE1BQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxLQUFLLEVBQUU7QUFDbEMsVUFBTSxHQUFHLElBQUksSUFBSSxFQUFFLENB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QUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxVQUFTLElBQUksRUFBRTtBQUNsQyxXQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvQixVQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNqRCxDQUFDLENBQUM7Ozs7Ozs7O0NBUU4sQ0FBQyxDQUFBOztBQUVGLElBQUksV0FBVyxHQUFHLFNBQWQsV0FBVyxHQUFjO0FBQzNCLE1BQUksSUFBSSxHQUFHLElBQUksQ0FBQztBQUNoQixRQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxZQUFXO0FBQzdCLFdBQU8sQ0FBQyxHQUFHLENBQUMsaUNBQWlDLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztHQUNwRyxDQUFDLENBQUM7Q0FFSixDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixVQUFRLEVBQUUsUUFBUTtBQUNsQixhQUFXLEVBQUUsV0FBVztBQUN4QixRQUFNLEVBQUUsTUFBTTtDQUNmLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnTWVhbmlzY3VsZScsIFsndWkucm91dGVyJywgJ2ZpcmViYXNlJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAvLyBUaGlzIHR1cm5zIG9mZiBoYXNoYmFuZyB1cmxzICgvI2Fib3V0KSBhbmQgY2hhbmdlcyBpdCB0byBzb21ldGhpbmcgbm9ybWFsICgvYWJvdXQpXG4gICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAvLyBJZiB3ZSBnbyB0byBhIFVSTCB0aGF0IHVpLXJvdXRlciBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCwgZ28gdG8gdGhlIFwiL1wiIHVybC5cbiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApIHtcbiAgdmFyIHNvY2tldCA9IGlvKCk7XG4gIGZ1bmN0aW9uIGluaXRpYXRlICgpIHsgXG4gICAgY29uc29sZS5sb2coJ2luaXRpYXRlZCEnKTtcbiAgICBwYXBlci5pbnN0YWxsKHdpbmRvdyk7XG4gICAgcGFwZXIuc2V0dXAoXCJteUNhbnZhc1wiKTtcbiAgfTtcbiAgaW5pdGlhdGUoKTtcblxuICAvLyBEcmF3aW5nIG9uIHRoZSBuaWdodCBza3lcbiAgdmFyIHRvb2wgPSBuZXcgVG9vbCgpO1xuXG4gIHZhciBzdHJva2U7XG4gIHZhciBwYXRoX3RvX3NlbmQgPSB7fTtcblxuICB0b29sLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgc3Ryb2tlID0gbmV3IFBhdGgoKTtcbiAgICBzdHJva2UuZmlsbENvbG9yID0ge1xuICAgICAgaHVlOiBNYXRoLnJhbmRvbSgpICogMzYwLFxuICAgICAgc2F0dXJhdGlvbjogMSxcbiAgICAgIGJyaWdodG5lc3M6IDFcbiAgICB9O1xuICAgIHN0cm9rZS5hZGQoZXZlbnQucG9pbnQpO1xuXG4gIC8vZGVmaW5pbmcgd2hhdCB0byBzZW5kIHZpYSBzb2NrZXRzXG4gICAgcGF0aF90b19zZW5kID0ge1xuICAgICAgY29sb3I6IHN0cm9rZS5maWxsQ29sb3IsXG4gICAgICBzdGFydDogZXZlbnQucG9pbnQsXG4gICAgICBzdHJva2U6IFtdXG4gICAgfTtcbiAgfTtcblxuICB0b29sLm9uTW91c2VEcmFnID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHN0ZXAgPSBldmVudC5kZWx0YS5kaXZpZGUoMilcbiAgICBzdGVwLmFuZ2xlICs9IDkwO1xuXG4gICAgdmFyIHRvcCA9IGV2ZW50Lm1pZGRsZVBvaW50LmFkZChzdGVwKTtcbiAgICB2YXIgYm90dG9tID0gZXZlbnQubWlkZGxlUG9pbnQuc3VidHJhY3Qoc3RlcCk7XG5cbiAgICBzdHJva2UuYWRkKHRvcCk7XG4gICAgc3Ryb2tlLmluc2VydCgwLCBib3R0b20pO1xuICAgIHN0cm9rZS5zbW9vdGgoKTtcblxuICAgIHBhdGhfdG9fc2VuZC5zdHJva2UucHVzaCh7XG4gICAgICB0b3A6IHRvcCxcbiAgICAgIGJvdHRvbTogYm90dG9tXG4gICAgfSk7XG4gICAgLy9lbWl0dGluZyBteSBkcmF3aW5nXG4gICAgc29ja2V0LmVtaXQoJ21lRHJhd2luZycsIEpTT04uc3RyaW5naWZ5KHBhdGhfdG9fc2VuZCkpO1xuICB9XG5cbiAgdG9vbC5vbk1vdXNlVXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBzdHJva2UuYWRkKGV2ZW50LnBvaW50KTtcbiAgICBzdHJva2UuY2xvc2VkID0gdHJ1ZTtcbiAgICBzdHJva2Uuc21vb3RoKCk7XG4gIH1cblxuICAvLyBXaGVuIHNvbWVvbmUgZWxzZSBzdGFydHMgZHJhd2luZ1xuICBzb2NrZXQub24oJ2ZyaWVuZHNEcmF3aW5nJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coJ2ZyaWVuZHNEcmF3aW5nJywgSlNPTi5wYXJzZShkYXRhKSk7XG4gICAgICB2YXIgc3Ryb2tlMiA9IG5ldyBQYXRoKCk7XG4gICAgICB2YXIgZnJpZW5kc0RyYXdpbmcgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgdmFyIGVhY2hTdHJva2UgPSBmcmllbmRzRHJhd2luZy5zdHJva2U7XG4gICAgICB2YXIgc3RhcnRfcG9pbnQgPSBuZXcgUG9pbnQoZnJpZW5kc0RyYXdpbmcuc3RhcnRbMV0sIGZyaWVuZHNEcmF3aW5nLnN0YXJ0WzJdKVxuICAgICAgdmFyIGNvbG9yID0gZnJpZW5kc0RyYXdpbmcuY29sb3JcbiAgICAgIHN0cm9rZTIuZmlsbENvbG9yID0gY29sb3I7XG4gICAgICBzdHJva2UyLmFkZChzdGFydF9wb2ludCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZWFjaFN0cm9rZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdHJva2UyLmFkZChuZXcgUG9pbnQoZWFjaFN0cm9rZVtpXS50b3BbMV0sIGVhY2hTdHJva2VbaV0udG9wWzJdKSk7XG4gICAgICAgIHN0cm9rZTIuaW5zZXJ0KDAsIG5ldyBQb2ludChlYWNoU3Ryb2tlW2ldLmJvdHRvbVsxXSwgZWFjaFN0cm9rZVtpXS5ib3R0b21bMl0pKTtcbiAgICAgIH1cbiAgICAgIHN0cm9rZTIuc21vb3RoKCk7XG4gICAgICBjb25zb2xlLmxvZygnaGVyZSBpcyBzdHJva2UyJywgc3Ryb2tlMik7XG4gICAgICB2aWV3LmRyYXcoKTtcbiAgICAgIHZpZXcudXBkYXRlKCk7XG4gIH0pO1xuXG4gIC8vUHV0dGluZyBzdGFycyBvbiB0aGUgbmlnaHQgc2t5XG5cbiAgdmFyIGNlbnRlciA9IHZpZXcuY2VudGVyO1xuICB2YXIgcG9pbnRzID0gNTtcbiAgdmFyIHJhZGl1czEgPSA1O1xuICB2YXIgcmFkaXVzMiA9IDEwO1xuICB2YXIgc3RhciA9IG5ldyBQYXRoLlN0YXIoY2VudGVyLCBwb2ludHMsIHJhZGl1czEsIHJhZGl1czIpO1xuICBcbiAgc3Rhci5zdHlsZSA9IHtcbiAgICBmaWxsQ29sb3I6ICd5ZWxsb3cnXG4gIH1cblxuICB2YXIgc3RhckFyciA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgdmFyIHN0YXJDb3B5ID0gc3Rhci5jbG9uZSgpO1xuICAgIHZhciByYW5kb21Qb3NpdGlvbiA9IFBvaW50LnJhbmRvbSgpO1xuICAgIHJhbmRvbVBvc2l0aW9uLnggPSByYW5kb21Qb3NpdGlvbi54ICogdmlldy5zaXplLl93aWR0aDtcbiAgICByYW5kb21Qb3NpdGlvbi55ID0gcmFuZG9tUG9zaXRpb24ueSAqIHZpZXcuc2l6ZS5faGVpZ2h0O1xuICAgIHN0YXJDb3B5LnBvc2l0aW9uID0gcmFuZG9tUG9zaXRpb247XG4gICAgc3RhckNvcHkucm90YXRlKE1hdGgucmFuZG9tKCkgKiAyMCk7XG4gICAgc3RhckNvcHkuc2NhbGUoMC4yNSArIE1hdGgucmFuZG9tKCkgKiAwLjc1KTtcbiAgICBzdGFyQ29weS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB0aGlzLm9wYWNpdHkgPSBNYXRoLnJhbmRvbSgpO1xuICAgIH1cbiAgICBzdGFyQXJyLnB1c2goc3RhckNvcHkpO1xuICB9XG5cbiAgc3Rhci5yZW1vdmUoKTtcblxuICB2aWV3Lm9uRnJhbWUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc3RhckFyci5sZW5ndGg7IGkrKykge1xuICAgICAgc3RhckFycltpXS5maWxsQ29sb3IuaHVlICs9ICAoMSAtIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkgKiAyKSAqIChNYXRoLnJhbmRvbSgpICogNSk7XG4gICAgICBzdGFyQXJyW2ldLnJvdGF0ZShNYXRoLnJhbmRvbSgpKTtcbiAgICAgIHN0YXJBcnJbaV0ucG9zaXRpb24ueCArPSBzdGFyQXJyW2ldLmJvdW5kcy53aWR0aCAvIDIwMDtcbiAgICAgIGlmIChzdGFyQXJyW2ldLmJvdW5kcy5sZWZ0ID4gdmlldy5zaXplLndpZHRoKSB7XG4gICAgICAgIHN0YXJBcnJbaV0ucG9zaXRpb24ueCA9IC1zdGFyQXJyW2ldLmJvdW5kcy53aWR0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvL3Byb2plY3QgcmVmZXJzIHRoZSB3b3JrIGRvbmUgb24gdGhlIGNhbnZhc1xuICBzb2NrZXQuZW1pdCgnc2VuZHRoZU5pZ2h0JywgcHJvamVjdCk7XG5cbn0pO1xuIiwiYXBwLmZhY3RvcnkoJ0RyYXdpbmdGYWN0b3J5JywgZnVuY3Rpb24gKCRodHRwKSB7XG4gIHJldHVybiB7XG4gICAgbG9hZENhbnZhczogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldChcIi9cIilcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcbiAgICB9KTtcbn0pOyIsImFwcC5kaXJlY3RpdmUoXCJuYXZiYXJcIiwgZnVuY3Rpb24oKXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0dGVtcGxhdGVVcmw6IFwiL2FwcC9uYXZiYXIvbmF2YmFyLmh0bWxcIlxuXHR9O1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuICB2YXIgc29ja2V0ID0gaW8oKTtcbiAgZnVuY3Rpb24gaW5pdGlhdGUgKCkgeyBcbiAgICBjb25zb2xlLmxvZygnaW5pdGlhdGVkIScpO1xuICAgIHBhcGVyLmluc3RhbGwod2luZG93KTtcbiAgICBwYXBlci5zZXR1cChcIm15Q2FudmFzXCIpO1xuICB9O1xuICBpbml0aWF0ZSgpO1xuXG4gIC8vIERyYXdpbmcgb24gdGhlIG5pZ2h0IHNreVxuICB2YXIgdG9vbCA9IG5ldyBUb29sKCk7XG5cbiAgdmFyIHN0cm9rZTtcbiAgdmFyIHBhdGhfdG9fc2VuZCA9IHt9O1xuXG4gIHRvb2wub25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBzdHJva2UgPSBuZXcgUGF0aCgpO1xuICAgIHN0cm9rZS5maWxsQ29sb3IgPSB7XG4gICAgICBodWU6IE1hdGgucmFuZG9tKCkgKiAzNjAsXG4gICAgICBzYXR1cmF0aW9uOiAxLFxuICAgICAgYnJpZ2h0bmVzczogMVxuICAgIH07XG4gICAgc3Ryb2tlLmFkZChldmVudC5wb2ludCk7XG5cbiAgLy9kZWZpbmluZyB3aGF0IHRvIHNlbmQgdmlhIHNvY2tldHNcbiAgICBwYXRoX3RvX3NlbmQgPSB7XG4gICAgICBjb2xvcjogc3Ryb2tlLmZpbGxDb2xvcixcbiAgICAgIHN0YXJ0OiBldmVudC5wb2ludCxcbiAgICAgIHN0cm9rZTogW11cbiAgICB9O1xuICB9O1xuXG4gIHRvb2wub25Nb3VzZURyYWcgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgc3RlcCA9IGV2ZW50LmRlbHRhLmRpdmlkZSgyKVxuICAgIHN0ZXAuYW5nbGUgKz0gOTA7XG5cbiAgICB2YXIgdG9wID0gZXZlbnQubWlkZGxlUG9pbnQuYWRkKHN0ZXApO1xuICAgIHZhciBib3R0b20gPSBldmVudC5taWRkbGVQb2ludC5zdWJ0cmFjdChzdGVwKTtcblxuICAgIHN0cm9rZS5hZGQodG9wKTtcbiAgICBzdHJva2UuaW5zZXJ0KDAsIGJvdHRvbSk7XG4gICAgc3Ryb2tlLnNtb290aCgpO1xuXG4gICAgcGF0aF90b19zZW5kLnN0cm9rZS5wdXNoKHtcbiAgICAgIHRvcDogdG9wLFxuICAgICAgYm90dG9tOiBib3R0b21cbiAgICB9KTtcbiAgICAvL2VtaXR0aW5nIG15IGRyYXdpbmdcbiAgICBzb2NrZXQuZW1pdCgnbWVEcmF3aW5nJywgSlNPTi5zdHJpbmdpZnkocGF0aF90b19zZW5kKSk7XG4gIH1cblxuICB0b29sLm9uTW91c2VVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHN0cm9rZS5hZGQoZXZlbnQucG9pbnQpO1xuICAgIHN0cm9rZS5jbG9zZWQgPSB0cnVlO1xuICAgIHN0cm9rZS5zbW9vdGgoKTtcbiAgfVxuXG4gIC8vIFdoZW4gc29tZW9uZSBlbHNlIHN0YXJ0cyBkcmF3aW5nXG4gIHNvY2tldC5vbignZnJpZW5kc0RyYXdpbmcnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZygnZnJpZW5kc0RyYXdpbmcnLCBKU09OLnBhcnNlKGRhdGEpKTtcbiAgICAgIHZhciBzdHJva2UyID0gbmV3IFBhdGgoKTtcbiAgICAgIHZhciBmcmllbmRzRHJhd2luZyA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB2YXIgZWFjaFN0cm9rZSA9IGZyaWVuZHNEcmF3aW5nLnN0cm9rZTtcbiAgICAgIHZhciBzdGFydF9wb2ludCA9IG5ldyBQb2ludChmcmllbmRzRHJhd2luZy5zdGFydFsxXSwgZnJpZW5kc0RyYXdpbmcuc3RhcnRbMl0pXG4gICAgICB2YXIgY29sb3IgPSBmcmllbmRzRHJhd2luZy5jb2xvclxuICAgICAgc3Ryb2tlMi5maWxsQ29sb3IgPSBjb2xvcjtcbiAgICAgIHN0cm9rZTIuYWRkKHN0YXJ0X3BvaW50KTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBlYWNoU3Ryb2tlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0cm9rZTIuYWRkKG5ldyBQb2ludChlYWNoU3Ryb2tlW2ldLnRvcFsxXSwgZWFjaFN0cm9rZVtpXS50b3BbMl0pKTtcbiAgICAgICAgc3Ryb2tlMi5pbnNlcnQoMCwgbmV3IFBvaW50KGVhY2hTdHJva2VbaV0uYm90dG9tWzFdLCBlYWNoU3Ryb2tlW2ldLmJvdHRvbVsyXSkpO1xuICAgICAgfVxuICAgICAgc3Ryb2tlMi5zbW9vdGgoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdoZXJlIGlzIHN0cm9rZTInLCBzdHJva2UyKTtcbiAgICAgIHZpZXcuZHJhdygpO1xuICAgICAgdmlldy51cGRhdGUoKTtcbiAgfSk7XG5cbiAgLy9QdXR0aW5nIHN0YXJzIG9uIHRoZSBuaWdodCBza3lcblxuICB2YXIgY2VudGVyID0gdmlldy5jZW50ZXI7XG4gIHZhciBwb2ludHMgPSA1O1xuICB2YXIgcmFkaXVzMSA9IDU7XG4gIHZhciByYWRpdXMyID0gMTA7XG4gIHZhciBzdGFyID0gbmV3IFBhdGguU3RhcihjZW50ZXIsIHBvaW50cywgcmFkaXVzMSwgcmFkaXVzMik7XG4gIFxuICBzdGFyLnN0eWxlID0ge1xuICAgIGZpbGxDb2xvcjogJ3llbGxvdydcbiAgfVxuXG4gIHZhciBzdGFyQXJyID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICB2YXIgc3RhckNvcHkgPSBzdGFyLmNsb25lKCk7XG4gICAgdmFyIHJhbmRvbVBvc2l0aW9uID0gUG9pbnQucmFuZG9tKCk7XG4gICAgcmFuZG9tUG9zaXRpb24ueCA9IHJhbmRvbVBvc2l0aW9uLnggKiB2aWV3LnNpemUuX3dpZHRoO1xuICAgIHJhbmRvbVBvc2l0aW9uLnkgPSByYW5kb21Qb3NpdGlvbi55ICogdmlldy5zaXplLl9oZWlnaHQ7XG4gICAgc3RhckNvcHkucG9zaXRpb24gPSByYW5kb21Qb3NpdGlvbjtcbiAgICBzdGFyQ29weS5yb3RhdGUoTWF0aC5yYW5kb20oKSAqIDIwKTtcbiAgICBzdGFyQ29weS5zY2FsZSgwLjI1ICsgTWF0aC5yYW5kb20oKSAqIDAuNzUpO1xuICAgIHN0YXJDb3B5Lm9uTW91c2VNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHRoaXMub3BhY2l0eSA9IE1hdGgucmFuZG9tKCk7XG4gICAgfVxuICAgIHN0YXJBcnIucHVzaChzdGFyQ29weSk7XG4gIH1cblxuICBzdGFyLnJlbW92ZSgpO1xuXG4gIHZpZXcub25GcmFtZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzdGFyQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdGFyQXJyW2ldLmZpbGxDb2xvci5odWUgKz0gICgxIC0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSAqIDIpICogKE1hdGgucmFuZG9tKCkgKiA1KTtcbiAgICAgIHN0YXJBcnJbaV0ucm90YXRlKE1hdGgucmFuZG9tKCkpO1xuICAgICAgc3RhckFycltpXS5wb3NpdGlvbi54ICs9IHN0YXJBcnJbaV0uYm91bmRzLndpZHRoIC8gMjAwO1xuICAgICAgaWYgKHN0YXJBcnJbaV0uYm91bmRzLmxlZnQgPiB2aWV3LnNpemUud2lkdGgpIHtcbiAgICAgICAgc3RhckFycltpXS5wb3NpdGlvbi54ID0gLXN0YXJBcnJbaV0uYm91bmRzLndpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gdmFyIGJsYWNrU3F1YXJlID0gUGF0aC5SZWN0YW5nbGUobmV3IFBvaW50KDAsMCksIG5ldyBTaXplKHZpZXcuc2l6ZS5fd2lkdGgsdmlldy5zaXplLl9oZWlnaHQpKTtcbiAgLy8gYmxhY2tTcXVhcmUuZmlsbENvbG9yID0gJ3llbGxvdyc7XG4gIC8vIGJsYWNrU3F1YXJlLm9wYWNpdHkgPSAwLjg1O1xuICAvLyBibGFja1NxdWFyZSA9IG5ldyBMYXllcigpO1xuXG4gIC8vIC8vY3JlYXRpbmcgbmV3IHRvb2wgdG8gY2xlYXIgdGhlIG5pZ2h0IHNreSBvciBcImVyYXNlXCIgdGhlIGJsYWNrQ292ZXIgb24gYSBwYXRoXG4gIC8vIHZhciB0b29sMiA9IG5ldyBUb29sKCk7XG5cbiAgLy8gdmFyIHN0cm9rZTI7XG4gIC8vIHZhciBwYXRoX3RvX3NlbmQyID0ge307XG5cbiAgLy8gLy8gcHJvamVjdC5sYXllcnNbMV0uaW5zZXJ0Q2hpbGQoMCwgc3Ryb2tlMik7XG4gIC8vIHRvb2wyLm9uTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vICAgc3Ryb2tlMiA9IG5ldyBQYXRoKCk7XG4gIC8vICAgc3Ryb2tlMi5maWxsQ29sb3IgPSAnZ3JlZW4nOyAvL3RoZSBjb2xvciBkb2VzIG5vdCBhZmZlY3QgdGhlIGZ1bmN0aW9uYWxpdHlcbiAgLy8gICBzdHJva2UyLm9wYWNpdHkgPSAxO1xuICAvLyAgIHN0cm9rZTIuc3Ryb2tlV2lkdGggPSAyMDtcbiAgLy8gICAvLyBzdHJva2UyLmJsZW5kTW9kZSA9ICdkZXN0aW5hdGlvbi1vdXQnOyAvL2NvbmZsaWN0cyB3aXRoIHN0cm9rZTIuZmlsbENvbG9yXG4gIC8vICAgc3Ryb2tlMi5hZGQoZXZlbnQucG9pbnQpO1xuICAvLyAvLyAvL2RlZmluaW5nIHdoYXQgdG8gc2VuZCB2aWEgc29ja2V0c1xuICAvLyAgIHBhdGhfdG9fc2VuZDIgPSB7XG4gIC8vICAgICBjb2xvcjogc3Ryb2tlMi5maWxsQ29sb3IsXG4gIC8vICAgICBzdGFydDogZXZlbnQucG9pbnQsXG4gIC8vICAgICBzdHJva2UyOiBbXVxuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8vIHRvb2wyLm9uTW91c2VEcmFnID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIC8vICAgdmFyIHN0ZXAgPSBldmVudC5kZWx0YS5kaXZpZGUoMilcbiAgLy8gICBzdGVwLmFuZ2xlICs9IDkwO1xuXG4gIC8vICAgdmFyIHRvcCA9IGV2ZW50Lm1pZGRsZVBvaW50LmFkZChzdGVwKTtcbiAgLy8gICB2YXIgYm90dG9tID0gZXZlbnQubWlkZGxlUG9pbnQuc3VidHJhY3Qoc3RlcCk7XG5cbiAgLy8gICBzdHJva2UyLmFkZCh0b3ApO1xuICAvLyAgIHN0cm9rZTIuaW5zZXJ0KDAsIGJvdHRvbSk7XG4gIC8vICAgc3Ryb2tlMi5zbW9vdGgoKTtcblxuICAvLyAgIHBhdGhfdG9fc2VuZDIuc3Ryb2tlMi5wdXNoKHtcbiAgLy8gICAgIHRvcDogdG9wLFxuICAvLyAgICAgYm90dG9tOiBib3R0b21cbiAgLy8gICB9KTtcblxuICAvLyAgIC8vZW1pdHRpbmcgbXkgZHJhd2luZ1xuICAvLyAgIHNvY2tldC5lbWl0KCdjbGVhcmluZ1RoZVNreScsIEpTT04uc3RyaW5naWZ5KHBhdGhfdG9fc2VuZDIpKTtcbiAgLy8gfVxuXG4gIC8vIHRvb2wyLm9uTW91c2VVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAvLyAgIHN0cm9rZTIuYWRkKGV2ZW50LnBvaW50KTtcbiAgLy8gICBzdHJva2UyLmNsb3NlZCA9IHRydWU7XG4gIC8vICAgc3Ryb2tlMi5zbW9vdGgoKTtcbiAgLy8gfVxuICBcbiAgLy8gc29ja2V0Lm9uKCdmcmllbmRzU2VuZGluZ3RoZU5pZ2h0JywgZnVuY3Rpb24oZGF0YSkge1xuICAvLyAgICAgY29uc29sZS5sb2coJ2ZyaWVuZHNTZW5kaW5ndGhlTmlnaHQnLCBKU09OLnBhcnNlKGRhdGEpKTtcbiAgLy8gfSk7XG5cbiAgLy9wcm9qZWN0IHJlZmVycyB0aGUgd29yayBkb25lIG9uIHRoZSBjYW52YXNcbiAgc29ja2V0LmVtaXQoJ3NlbmR0aGVOaWdodCcsIHByb2plY3QpO1xuICAvLyBzb2NrZXQub24oJ2ZyaWVuZFNlbmRpbmcnLCBmdW5jdGlvbihkYXRhKSB7XG4gIC8vICAgY29uc29sZS5sb2coJ2ZyaWVuZFNlbmRpbmcnLCBKU09OLnBhcnNlKGRhdGEpKTtcbiAgLy8gfSlcblxufSk7XG4iLCJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciBhcHAgPSBleHByZXNzKCk7XG52YXIgc2VydmVyID0gcmVxdWlyZSgnaHR0cCcpLlNlcnZlcihhcHApXG52YXIgaW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKShzZXJ2ZXIpXG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBsb2dnZXIgPSByZXF1aXJlKCdtb3JnYW4nKTtcbnZhciBjaGFsayA9IHJlcXVpcmUoJ2NoYWxrJyk7XG52YXIgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG5cbnZhciBwdWJsaWNQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL3B1YmxpYycpO1xudmFyIGluZGV4SHRtbFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vaW5kZXguaHRtbCcpO1xudmFyIG5vZGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL25vZGVfbW9kdWxlcycpO1xuXG4vKiBcbk1lYW5pc2N1bGUgZG9lc24ndCB1c2UgQm93ZXIgYnkgZGVmYXVsdC4gVG8gdXNlIEJvd2VyLFxudW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSBhbmQgdGhlIHJlbGF0ZWQgYGFwcC51c2VgIGxpbmUgYmVsb3cuXG4qL1xuLy8gdmFyIGJvd2VyUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi9ib3dlcl9jb21wb25lbnRzJyk7XG5cbnZhciBzdGFydEFwcCA9IGZ1bmN0aW9uKCkge1xuICBhcHAudXNlKGxvZ2dlcignZGV2JykpO1xuICBhcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbiAgYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5cbiAgYXBwLnVzZShleHByZXNzLnN0YXRpYyhwdWJsaWNQYXRoKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMobm9kZVBhdGgpKTtcbiAgLy8gYXBwLnVzZShleHByZXNzLnN0YXRpYyhib3dlclBhdGgpKTtcblxuICAvKiBcbiAgUHJvdmlkZXMgYSA0MDQgZm9yIHRpbWVzIHdoZW4gXG4gIENyZWRpdCB0byBgZnNnYCBtb2R1bGUgZm9yIHRoaXMgb25lIVxuICAqL1xuICBhcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgaWYgKHBhdGguZXh0bmFtZShyZXEucGF0aCkubGVuZ3RoID4gMCkge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLmVuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0KG51bGwpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBSb3V0ZXNcbiAgLy8vLyBBUElzIGZvciBBSkFYXG4gIGFwcC51c2UoJy9hcGknLCByZXF1aXJlKCcuLi9yb3V0ZXMvJykpO1xuXG4gIC8vLy8gSW5kZXgvSG9tZVxuICBhcHAudXNlKCcvJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgJy4vdmlld3MvaW5kZXguaHRtbCcpKTtcbiAgfSk7XG5cblxuICAvLyBFcnJvcnNcbiAgLy8vLyBOb3QgZm91bmRcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ05vdCBGb3VuZCcpO1xuICAgIGVyci5zdGF0dXMgPSA0MDQ7XG4gICAgbmV4dChlcnIpO1xuICB9KTtcblxuICAvLy8vIFNlcnZlciBpc3N1ZXNcbiAgYXBwLnVzZShmdW5jdGlvbihlcnIsIHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgcmVzLnNlbmRTdGF0dXMoZXJyLnN0YXR1cyB8fCA1MDApO1xuXG4gIH0pO1xufTtcblxuaW8ub24oJ2Nvbm5lY3Rpb24nLCBmdW5jdGlvbihzb2NrZXQpIHtcbiAgICBjb25zb2xlLmxvZygnY29ubmVjdGVkJywgc29ja2V0LmlkKTtcbiAgICAvL2xpc3RlbmluZyB0byB0aGUgbmlnaHQgc2t5IHdpdGggc3RhcnNcbiAgICBzb2NrZXQub24oJ3NlbmR0aGVOaWdodCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBzdGFycnkgbmlnaHQnLCBkYXRhKVxuICAgIH0pO1xuXG4gICAgc29ja2V0Lm9uKCdtZURyYXdpbmcnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdtZURyYXdpbmcnLCBkYXRhKTtcbiAgICAgICAgc29ja2V0LmJyb2FkY2FzdC5lbWl0KCdmcmllbmRzRHJhd2luZycsIGRhdGEpO1xuICAgIH0pO1xuXG4gICAgLy9saXN0ZW5pbmcgdG8gbWUgY2xlYXJpbmcgdGhlIHNreVxuICAgIC8vIHNvY2tldC5vbignY2xlYXJpbmdUaGVTa3knLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCdjbGVhcmluZ1RoZVNreScsIGRhdGEpO1xuICAgIC8vbGlzdGVuaW5nIHRvIG90aGVyIHBlb3BsZSBjbGVhcmluZyB0aGUgc2t5XG4gICAgLy8gICAgIHNvY2tldC5icm9hZGNhc3QuZW1pdCgnZnJpZW5kc0NsZWFyaW5nJywgZGF0YSk7XG4gICAgLy8gfSk7ICAgIFxufSlcblxudmFyIHN0YXJ0U2VydmVyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwb3J0ID0gNDU0NTtcbiAgc2VydmVyLmxpc3Rlbihwb3J0LCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnVGhlIHNlcnZlciBpcyBsaXN0ZW5pbmcgb24gcG9ydCcsIGNoYWxrLmdyZWVuLmJvbGQocG9ydCksICdhbmQgbG92ZXMgeW91IHZlcnkgbXVjaC4nKTtcbiAgfSk7XG4gIFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0YXJ0QXBwOiBzdGFydEFwcCxcbiAgc3RhcnRTZXJ2ZXI6IHN0YXJ0U2VydmVyLFxuICBzZXJ2ZXI6IHNlcnZlclxufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=